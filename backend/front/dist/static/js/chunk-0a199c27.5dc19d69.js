(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a199c27"],{4880:function(e,t,a){"use strict";a("9a38")},"4c58":function(e,t,a){"use strict";a("df39")},"53f9":function(e,t,a){e.exports=a.p+"static/img/graph.deb531b3.png"},"699b":function(e,t,a){},"6f76":function(e,t,a){e.exports=a.p+"static/img/not_found.61857d1e.png"},"6fd5":function(e,t,a){},7101:function(e,t,a){"use strict";a("780e")},"780e":function(e,t,a){},9706:function(e,t,a){"use strict";a("6fd5")},"9a38":function(e,t,a){},aea1:function(e,t,a){"use strict";a("699b")},b921:function(e,t,a){},c4d6:function(e,t,a){"use strict";a("b921")},df39:function(e,t,a){},e57c:function(e,t,a){e.exports=a.p+"static/img/barchart_wait.fe81864a.png"},f903:function(e,t,a){"use strict";a("fbda")},fbda:function(e,t,a){},ff13:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{border:"0px solid green","background-color":"#f7fbff"}},[a("sticky",{attrs:{"class-name":"sub-navbar"}},[a("div",{staticStyle:{border:"0px solid red","text-align":"right"}},[a("el-button",{staticStyle:{border:"1px solid #67c23a"},attrs:{size:"medium",icon:"el-icon-s-tools",circle:""},on:{click:function(t){e.drawer=!0}}})],1)]),e._v(" "),a("el-row",{staticStyle:{border:"1px solid yellow",padding:"14px","background-color":"#f7fbff"}},[a("el-col",{staticClass:"cont-barchart-ventas",attrs:{xs:24,sm:24,md:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",[a("el-col",{staticStyle:{padding:"4px"},attrs:{sm:24,md:12}},[a("el-tag",{staticStyle:{"font-size":"small"},attrs:{type:"success"}},[a("b",[e._v("VENTAS TOTALES:")])]),a("span",{staticStyle:{"font-size":"small",color:"#606266"}},[a("b",[e._v(" $"+e._s(e._f("formatNumber")(e.ventas)))])])],1),e._v(" "),a("el-col",{staticStyle:{padding:"4px"},style:{textAlign:e.x.matches?"":"right"},attrs:{sm:24,md:12}},[a("el-tag",{staticStyle:{"font-size":"small"}},[a("b",[e._v("AÑOS:")])]),a("span",{staticStyle:{"font-size":"small",color:"#606266"}},[a("b",[e._v(e._s(e.selectAnos))])]),e._v(" "),a("el-tag",{staticStyle:{"font-size":"small"}},[a("b",[e._v("MESES:")])]),a("span",{staticStyle:{"font-size":"small",color:"#606266"}},[a("b",[e._v(e._s(e.selectMeses))])])],1)],1)],1),e._v(" "),a("div",{staticStyle:{border:"0px solid red","text-align":"center",height:"100%"},style:{paddingLeft:e.x.matches?"":"20%",paddingRight:e.x.matches?"":"20%"}},[0!==e.ventas?a("transition",{attrs:{name:"el-zoom-in-center"}},[a("bar-chart",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"bar-chart",attrs:{chartdata:e.barChartData}})],1):a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-image",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"msg-not-data",staticStyle:{width:"40%",height:"40%"},attrs:{src:e.imgNotFound,fit:"contain"}})],1)],1)])],1)],1),e._v(" "),a("el-row",{staticStyle:{"z-index":"2"},style:{height:e.x.matches?"23em":"56vh"}},[a("el-col",{staticClass:"pane-container-text",attrs:{xs:24,sm:24,md:24}},[a("label",[e._v("VENTAS X PRODUCTO")])]),e._v(" "),a("el-col",{staticClass:"class-table-ventas",attrs:{xs:24,sm:12,md:13}},[a("table-productos",{attrs:{nametable:"productos",datatable:e.tableDataProductos,tablecolumns:e.tableColumnProductos,loading:e.loadTableProductos,heightxs:"15em"},on:{tableids:e.selectTableProducto}})],1),e._v(" "),a("el-col",{staticClass:"class-pie-ventas",attrs:{xs:24,sm:12,md:11}},[a("pie-chart-productos",{attrs:{namepie:"producto",title:"Clientes X Producto",piedata:e.pieChartProductos,loadpiedata:e.loadPieProductos},on:{detallePie:e.showDialogPie}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"z-index":"1"},style:{height:e.x.matches?"23em":"56vh"}},[a("el-col",{staticClass:"pane-container-text",attrs:{xs:24,sm:24,md:24}},[a("label",[e._v("VENTAS X CLIENTE")])]),e._v(" "),a("el-col",{staticClass:"class-table-ventas",attrs:{xs:24,sm:12,md:13}},[a("table-clientes",{attrs:{nametable:"clientes",datatable:e.tableDataClientes,tablecolumns:e.tableColumnClientes,loading:e.loadTableClientes,heightxs:"15em"},on:{tableids:e.selectTableCliente}})],1),e._v(" "),a("el-col",{staticClass:"class-pie-ventas",attrs:{xs:24,sm:12,md:11}},[a("pie-chart-clientes",{attrs:{namepie:"cliente",title:"Productos X Cliente",piedata:e.pieChartClientes,loadpiedata:e.loadPieClientes},on:{detallePie:e.showDialogPie}})],1)],1),e._v(" "),a("el-row",{style:{height:e.x.matches?"23em":"56vh"}},[a("el-col",{staticClass:"pane-container-text",attrs:{xs:24,sm:24,md:24}},[a("label",[e._v("VENTAS X VENDEDOR")])]),e._v(" "),a("el-col",{staticClass:"class-table-ventas",attrs:{xs:24,sm:12,md:13}},[a("table-usuarios",{attrs:{nametable:"vendedores",datatable:e.tableDataUsuarios,tablecolumns:e.tableColumnUsuarios,loading:e.loadTableUsuarios,heightxs:"15em"},on:{tableids:e.selectTableUsuario}})],1),e._v(" "),a("el-col",{staticClass:"class-pie-ventas",attrs:{xs:24,sm:12,md:11}},[a("pie-chart-usuarios",{attrs:{namepie:"vendedor",title:"Clientes X Vendedores",piedata:e.pieChartUsuarios,loadpiedata:e.loadPieUsuarios},on:{detallePie:e.showDialogPie}})],1)],1),e._v(" "),a("drawer-options",{attrs:{open:e.drawer},on:{statusDrawer:e.handleDrawer,ventas:e.getVentas,ano:e.selectTreeAno,mes:e.selectTreeMes,producto:e.selectTreeProducto,cliente:e.selectTreeCliente,loadingProducto:e.loadProducto,loadingCliente:e.loadCliente,loadingUsuario:e.loadUsuario,vendedor:e.selectTreeUsuario}}),e._v(" "),a("dialog-pie",{attrs:{visible:e.dialogPieVisible,dialogdata:e.dataPieDialog,dialogcolumns:e.columnsPieDialog,title:e.pieSelectTitle},on:{closeDialogPie:e.handleDialogPie}})],1)},i=[],n=(a("ac6a"),a("ffc1"),a("c7eb")),o=(a("96cf"),a("1da1")),r=a("e57c"),l=a.n(r),c=a("b804"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"I am the title",visible:e.open,"with-header":!1,size:e.x.matches&&!e.landscape.matches?"90%":"30em","before-close":e.handleClose},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticStyle:{border:"0px solid red",height:"100vh",overflow:"auto",background:"#f7d9cd"}},[a("el-row",{style:{height:e.x.matches?"3em":"6vh"}},[a("el-col",{staticStyle:{border:"1px solid green",height:"100%"},attrs:{xs:24,md:24}},[a("sticky",{staticClass:"sub-navbar"},[a("div",{staticStyle:{border:"0px solid red","text-align":"right"}},[a("el-button",{staticStyle:{border:"1px solid #67c23a"},attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.statusDrawer(!1)}}},[a("b",[e._v("X")])])],1)])],1)],1),e._v(" "),a("el-row",{style:{height:e.x.matches?"10em":"22vh"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{xs:12,md:12}},[a("tree-anos",{attrs:{datatree:e.listaAnos,nametree:"año",loading:e.loadAnos},on:{selected:e.submitSelectAnos}})],1),e._v(" "),a("el-col",{staticStyle:{height:"100%"},attrs:{xs:12,md:12}},[a("tree-meses",{attrs:{datatree:e.listaMeses,nametree:"mes",loading:e.loadMeses},on:{selected:e.submitSelectMeses}})],1)],1),e._v(" "),a("el-row",{style:{height:e.x.matches?"10em":"24vh"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{xs:24,md:24}},[a("tree-productos",{attrs:{datatree:e.listaProductos,nametree:"productos",loading:e.loadProductos},on:{selected:e.submitSelectProductos}})],1)],1),e._v(" "),a("el-row",{style:{height:e.x.matches?"10em":"24vh"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{xs:24,md:24}},[a("tree-clientes",{attrs:{datatree:e.listaClientes,nametree:"clientes",loading:e.loadClientes},on:{selected:e.submitSelectClientes}})],1)],1),e._v(" "),a("el-row",{style:{height:e.x.matches?"10em":"24vh"}},[a("el-col",{staticStyle:{height:"100%"},attrs:{xs:24,md:24}},[a("tree-usuarios",{attrs:{datatree:e.listaUsuarios,nametree:"vendedores",loading:e.loadUsuarios},on:{selected:e.submitSelectUsuarios}})],1)],1)],1)])},u=[],h=a("b775");function p(){return Object(h["a"])({url:"/ventas_lista_anos",method:"get"})}function m(e){return Object(h["a"])({url:"/ventas_lista_meses",method:"post",data:e})}function f(e){return Object(h["a"])({url:"/ventas_clientes",method:"post",data:e})}function b(e){return Object(h["a"])({url:"/ventas_usuarios",method:"post",data:e})}function g(e){return Object(h["a"])({url:"/ventas_productos",method:"post",data:e})}function v(e){return Object(h["a"])({url:"/ventas_ano",method:"post",data:e})}function w(e){return Object(h["a"])({url:"/ventas_ano_mes",method:"post",data:e})}var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{height:"100%",overflow:"auto",background:"#f7d9cd"},style:{borderRight:"año"===e.nametree?"1px solid #606266":""}},[a("el-col",{staticClass:"pane-fixed-options",attrs:{span:24}},[a("div",{staticClass:"pane-text-options"},[a("label",[e._v(e._s(e._f("uppercase")(e.nametree)))])]),e._v(" "),e.datatree.length?a("el-input",{attrs:{size:"mini",placeholder:"Buscar","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e()],1),e._v(" "),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{border:"0px solid",height:"100%"},attrs:{span:24}},[a("el-tree",{ref:"tree",staticClass:"tree-class",attrs:{data:e.datatree,"show-checkbox":"","node-key":"id","default-expanded-keys":[0],props:e.defaultProps,"check-on-click-node":"","filter-node-method":e.filterNode},on:{"check-change":e.handleCheckChange}})],1)],1)},y=[],C=(a("c5f6"),{props:{datatree:{type:Array,default:null},nametree:{type:String,default:null},loading:{type:Boolean,default:!1}},data:function(){return{defaultProps:{children:"children",label:"label"},nodoSelect:[],count:0,filterText:""}},watch:{datatree:{deep:!0,handler:function(e){this.nodoSelect=[]}},filterText:function(e){this.$refs.tree.filter(e.toUpperCase())}},updated:function(){this.getCheckedNodes()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getCheckedNodes:function(){},handleCheckChange:function(e,t,a){0===e.id&&(window.localStorage.setItem("padre_checked_".concat(this.nametree),JSON.stringify(t)),window.localStorage.setItem("hijos_checked_".concat(this.nametree),JSON.stringify(a)));var s=JSON.parse(window.localStorage.getItem("padre_checked_".concat(this.nametree))),i=JSON.parse(window.localStorage.getItem("hijos_checked_".concat(this.nametree)));s&&!i?(this.verifyNodo(e.id,t),this.nodoSelect.length===this.datatree[0].total&&this.$emit("selected",this.nodoSelect)):!s&&i?(this.verifyNodo(e.id,t),this.nodoSelect.length!==this.datatree[0].total&&this.nodoSelect.length>0?this.$emit("selected",this.nodoSelect):this.$emit("selected",[])):s||i||(this.nodoSelect=[],window.localStorage.setItem("hijos_checked_".concat(this.nametree),JSON.stringify(!0))),this.count++},verifyNodo:function(e,t){if(0!==Number(e))if(t){var a=this.nodoSelect.indexOf(Number(e));-1===a&&this.nodoSelect.push(Number(e))}else if(!t){var s=this.nodoSelect.indexOf(Number(e));-1!==s&&this.nodoSelect.splice(s,1)}}}}),_=C,S=(a("aea1"),a("2877")),O=Object(S["a"])(_,x,y,!1,null,"2369da64",null),P=O.exports,j={name:"DrawerOptions",components:{Sticky:c["a"],treeAnos:P,treeMeses:P,treeClientes:P,treeUsuarios:P,treeProductos:P},props:{open:{type:Boolean,default:!1}},data:function(){return{listaAnos:[],listaMeses:[],listaClientes:[],listaUsuarios:[],listaProductos:[],loadAnos:!0,loadMeses:!1,loadClientes:!1,loadUsuarios:!1,loadProductos:!1,selectAnos:[],selectMeses:[],landscape:!1,x:""}},created:function(){this.x=window.matchMedia("(max-width: 800px)"),this.landscape=window.matchMedia("(orientation: landscape)"),this.initView()},methods:{initView:function(){this.getAnos()},statusDrawer:function(e){this.$emit("statusDrawer",e)},handleClose:function(){this.statusDrawer(!1)},submitSelectAnos:function(e){this.selectAnos=e;var t=[];this.selectAnos.length?(t=this.selectAnos,this.loadMeses=!0,this.getMeses(this.selectAnos)):(t=[],this.listaMeses=[],this.selectMeses=[],this.resetTrees()),this.$emit("ano",t)},submitSelectMeses:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectMeses=t,a=[],this.selectMeses.length?(a=this.selectMeses,this.loadClientes=!0,this.loadProductos=!0,this.loadUsuarios=!0,this.getVentasAno([0],[0],[0]),this.getProductos([0],[0],[0]).then((function(e){s.listaProductos=e})),this.getClientes([0]).then((function(e){s.listaClientes=e})),this.getUsuarios([0]).then((function(e){s.listaUsuarios=e}))):(a=[],this.resetTrees()),this.$emit("mes",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitSelectProductos:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.length){e.next=6;break}return this.$emit("loadingProducto",!0),e.next=4,this.getProductos([0],[0],t).then((function(e){a.$emit("producto",e[0])}));case 4:e.next=7;break;case 6:this.$emit("producto",[]);case 7:this.$emit("loadingProducto",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitSelectClientes:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.length){e.next=6;break}return this.$emit("loadingCliente",!0),e.next=4,this.getClientes(t).then((function(e){a.$emit("cliente",e[0])}));case 4:e.next=7;break;case 6:this.$emit("cliente",[]);case 7:this.$emit("loadingCliente",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitSelectUsuarios:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.length){e.next=6;break}return this.$emit("loadingUsuario",!0),e.next=4,this.getUsuarios(t).then((function(e){a.$emit("vendedor",e[0])}));case 4:e.next=7;break;case 6:this.$emit("vendedor",[]);case 7:this.$emit("loadingUsuario",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetTrees:function(){this.listaClientes=[],this.listaUsuarios=[],this.listaProductos=[],this.$emit("ventas",0),this.$emit("mes",[]),this.$emit("producto",[]),this.$emit("cliente",[]),this.$emit("vendedor",[])},getAnos:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(){var t=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().then((function(e){e[0]["children"].length&&(t.listaAnos=e),t.loadAnos=!1}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getMeses:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m(t).then((function(e){e[0]["children"].length&&(a.listaMeses=e),a.loadMeses=!1}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getProductos:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t,a,s){var i,o;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[],o={cliente:t,usuario:a,ano:this.selectAnos,mes:this.selectMeses,producto:s},e.next=4,g(o).then((function(e){e[0]["children"].length&&(i=e)}));case 4:return this.loadProductos=!1,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,s){return e.apply(this,arguments)}return t}(),getClientes:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],s={cliente:t,ano:this.selectAnos,mes:this.selectMeses},e.next=4,f(s).then((function(e){e[0]["children"].length&&(a=e)}));case 4:return this.loadClientes=!1,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getUsuarios:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],s={usuario:t,ano:this.selectAnos,mes:this.selectMeses},e.next=4,b(s).then((function(e){e[0]["children"].length&&(a=e)}));case 4:return this.loadUsuarios=!1,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVentasAno:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t,a,s){var i,o=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={cliente:t,usuario:a,ano:this.selectAnos,mes:this.selectMeses,producto:s},e.next=3,v(i).then((function(e){Object.entries(e).length?o.$emit("ventas",e):o.$emit("ventas",0)}),(function(e){console.log(e),o.$notify({title:"Advertencia!",message:"No tiene ventas para este período",position:"top-right",type:"warning",duration:2e3}),o.$emit("ventas",0)}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,a,s){return e.apply(this,arguments)}return t}(),getVentasAnoMes:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t,a,s){var i,o=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={cliente:t,usuario:a,ano:this.selectAnos,mes:this.selectMeses,producto:s},e.next=3,w(i).then((function(e){o.ventas=e}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,a,s){return e.apply(this,arguments)}return t}()}},$=j,D=(a("7101"),Object(S["a"])($,d,u,!1,null,"71103992",null)),k=D.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},T=[],A=a("313e"),U=a.n(A),z=a("ed08"),E={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var e=this;this.$_resizeHandler=Object(z["b"])((function(){e.chart&&e.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var M={mixins:[E],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},autoResize:{type:Boolean,default:!0},chartdata:{type:Object,required:!0},tamano:{type:Boolean,default:!1}},data:function(){return{chart:null,x:""}},watch:{chartdata:{deep:!0,handler:function(e){this.setOptions(e)}}},created:function(){this.x=window.matchMedia("(max-width: 800px)")},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=U.a.init(this.$el,"macarons"),this.setOptions(this.chartdata)},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.xAxis,a=e.data;this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:t,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Ventas",type:"bar",barWidth:"60%",data:a}]})}}},V=M,R=Object(S["a"])(V,N,T,!1,null,null,null),L=R.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,width:e.x.matches?"":"55em",fullscreen:!!e.x.matches,"custom-class":"dialog-class-pie",center:"","show-close":!0,"before-close":e.handleClose,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("sticky",{attrs:{"class-name":"sub-navbar"}},[a("div",{staticStyle:{border:"0px solid red",color:"white","text-align":"center"}},[a("h2",[e._v("Detalle")])])]),e._v(" "),a("table-dialog",{attrs:{nametable:e.title,datatable:e.dialogdata,tablecolumns:e.dialogcolumns,loading:e.loadingTable,heightxs:"75vh"},on:{tableids:e.selectTableDialog}})],1)},I=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"container-table"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Listado de "+e._s(e.nametable))]),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show||e.datatable.length,expression:"show || datatable.length"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{loading:e.downloadLoading,size:"small",type:"text",icon:"el-icon-download"},on:{click:e.handleDownload}},[a("span",[a("b",[e._v("Exportar a Excel")])])])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{border:"0px solid red",width:"100%","z-index":"0"},style:{height:e.x.matches?e.heightxs:"40vh"}},[!e.loading&&e.tablecolumns.length?a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.tablecolumns.length,expression:"!loading && tablecolumns.length"}],ref:"tableComponent",staticClass:"table-class",attrs:{data:e.datatable,height:"100%",border:"","show-summary":"","summary-method":e.getSummaries,fit:"",size:"mini","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),e._l(e.tablecolumns,(function(t){return a("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,width:e.x.matches&&!e.landscape.matches?t.width_xs:t.width,align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(s){return["label"===t.prop?a("div",[a("el-tag",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e._f("uppercaseFirst")(s.row[t.prop])))])],1):"precio"===t.prop||"total"===t.prop?a("div",[e._v("$ "+e._s(e._f("formatNumber")(s.row[t.prop])))]):"cantidad"===t.prop?a("div",[e._v(e._s(e._f("formatNumber")(s.row[t.prop])))]):a("div",[e._v(e._s(s.row[t.prop]))])]}}],null,!0)})}))],2)],1):a("div",{staticClass:"msg-not-data"},[a("el-image",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:e.imgNotFound,fit:"contain"}})],1)],1)])},J=[],H=a("b85c"),X=a("c1df"),Y=a.n(X),q=a("6f76"),W=a.n(q),G={props:{datatable:{type:Array,default:null},tablecolumns:{type:Array,default:null},loading:{type:Boolean,default:!1},nametable:{type:String,default:null},heightxs:{type:String,default:""}},data:function(){return{search:"",downloadLoading:!1,multipleSelection:[],filename:"",show:!1,currentDate:Y()(new Date).format("DDMMYYYY"),x:"",landscape:!1,imgNotFound:W.a}},watch:{datatable:{deep:!0,handler:function(e){e.length?this.show=!0:this.show=!1}}},created:function(){this.x=window.matchMedia("(max-width: 800px)"),this.landscape=window.matchMedia("(orientation: landscape)")},methods:{handleSelectionChange:function(e){var t,a=[],s=Object(H["a"])(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;a.push(i.id)}}catch(n){s.e(n)}finally{s.f()}e.length?(this.multipleSelection=e,this.$emit("tableids",a)):(this.multipleSelection=[],this.$emit("tableids",[]))},handleDownload:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(){var t=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.multipleSelection.length){e.next=7;break}return this.downloadLoading=!0,e.next=4,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-581b2547")]).then(a.bind(null,"4bf8d")).then(function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(a){var s,i,o,r,l,c,d;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[],i=[],o=Object(H["a"])(t.tablecolumns);try{for(o.s();!(r=o.n()).done;)l=r.value,s.push(l.label),i.push(l.prop)}catch(n){o.e(n)}finally{o.f()}return c=t.multipleSelection,d=t.formatJson(i,c),e.next=8,a.export_json_to_excel({header:s,data:d,filename:"".concat(t.nametable," - ").concat(t.currentDate)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:this.downloadLoading=!1,e.next=8;break;case 7:this.$message({message:"Seleccione al menos un ".concat(this.nametable),type:"warning"});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},getSummaries:function(e){var t=e.columns,a=e.data,s=[];return a&&t.forEach((function(e,t){if(0!==t)if("precio"!==e.property)if("id"!==e.property){var i=a.map((function(t){return Number(t[e.property])}));i.every((function(e){return isNaN(e)}))?s[t]="N/A":(s[t]=i.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),"total"===e.property?s[t]="$ "+new Intl.NumberFormat("de-DE").format(s[t]):s[t]=new Intl.NumberFormat("de-DE").format(s[t]))}else s[t]="N/A";else s[t]="N/A";else s[t]="="})),s}}},K=G,Q=(a("c4d6"),Object(S["a"])(K,F,J,!1,null,"c3d97dd4",null)),Z=Q.exports,ee={components:{Sticky:c["a"],tableDialog:Z},props:{visible:{type:Boolean,default:!1},dialogdata:{type:Array,default:null},dialogcolumns:{type:Array,default:null},title:{type:String,default:""}},data:function(){return{dialogVisible:!1,x:"",loadingTable:!1}},watch:{visible:{deep:!0,handler:function(e){this.dialogVisible=e}}},created:function(){this.x=window.matchMedia("(max-width: 800px)")},methods:{handleClose:function(){this.$emit("closeDialogPie",!1)},selectTableDialog:function(e){}}},te=ee,ae=(a("4c58"),Object(S["a"])(te,B,I,!1,null,null,null)),se=ae.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{height:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))]),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{size:"small",type:"text"},on:{click:function(t){return e.$emit("detallePie",{pieSelect:e.namepie,pieTitle:e.title,showDialog:!0})}}},[a("span",[a("b",[e._v("Ver detalle >")])])])],1)],1),e._v(" "),a("div",{staticStyle:{border:"0px solid",height:"100%","z-index":"0"}},[e.show?a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("pie-chart",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{"chart-data":e.piedata}})],1):a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("div",{staticClass:"msg-not-data"},[a("el-image",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{width:"100%",height:"100%"},attrs:{src:e.imgNotFound,fit:"contain"}})],1)])],1)])},ne=[],oe=a("53f9"),re=a.n(oe),le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},ce=[];a("817d");var de={mixins:[E],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0},tamano:{type:Boolean,default:!1}},data:function(){return{chart:null,x:""}},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},created:function(){this.x=window.matchMedia("(max-width: 800px)")},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=U.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=e.leyenda,s=e.datos;this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:this.x.matches?{show:!1}:{left:"center",bottom:"10",data:a},series:[{name:t,type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:s,animationEasing:"cubicInOut",animationDuration:2600}]})}}},ue=de,he=Object(S["a"])(ue,le,ce,!1,null,null,null),pe=he.exports,me={components:{PieChart:pe},props:{piedata:{type:Object,default:null},loadpiedata:{type:Boolean,default:!1},namepie:{type:String,default:""},title:{type:String,default:""}},data:function(){return{show:!1,load:!1,imgNotFound:re.a}},watch:{piedata:{deep:!0,handler:function(e){Object.entries(e).length?this.show=!0:this.show=!1}},loadpiedata:{deep:!0,handler:function(e){this.load=e}}},methods:{}},fe=me,be=(a("4880"),Object(S["a"])(fe,ie,ne,!1,null,"b20f210a",null)),ge=be.exports;function ve(e){return Object(h["a"])({url:"/producto_cliente",method:"post",data:e})}function we(e){return Object(h["a"])({url:"/cliente_producto",method:"post",data:e})}function xe(e){return Object(h["a"])({url:"/vendedor_cliente",method:"post",data:e})}var ye={name:"Ventas",components:{Sticky:c["a"],DrawerOptions:k,BarChart:L,tableProductos:Z,tableClientes:Z,tableUsuarios:Z,PieChartProductos:ge,PieChartClientes:ge,pieChartUsuarios:ge,DialogPie:se},data:function(){return{selectAnos:[],selectMeses:[],selectClientes:[],selectUsuarios:[],selectProductos:[],loadTableClientes:!1,loadTableUsuarios:!1,loadTableProductos:!1,tableDataProductos:[],tableDataClientes:[],tableDataUsuarios:[],tableColumnProductos:[],tableColumnClientes:[],tableColumnUsuarios:[],pieChartProductos:{},loadPieProductos:!1,pieChartClientes:{},loadPieClientes:!1,pieChartUsuarios:{},loadPieUsuarios:!1,ventas:0,drawer:!1,dialogPieVisible:!1,pieSelect:"",pieSelectTitle:"",dataPieDialog:[],columnsPieDialog:[],imgNotFound:l.a,barChartData:{},x:""}},created:function(){this.x=window.matchMedia("(max-width: 800px)")},methods:{showDialogPie:function(e){this.pieSelect=e.pieSelect,this.pieSelectTitle=e.pieTitle,this.dialogPieVisible=e.showDialog;var t=[],a=[];"producto"===this.pieSelect?(t=this.pieChartProductos.data,a=this.pieChartProductos.columns):"cliente"===this.pieSelect?(t=this.pieChartClientes.data,a=this.pieChartClientes.columns):"vendedor"===this.pieSelect&&(t=this.pieChartUsuarios.data,a=this.pieChartUsuarios.columns),this.dataPieDialog=t,this.columnsPieDialog=a},handleDialogPie:function(e){this.dialogPieVisible=e},handleDrawer:function(e){this.drawer=e},selectTableProducto:function(e){e.length?(this.loadPieProductos=!0,this.getDataClienteProducto(e)):this.pieChartProductos={}},selectTableCliente:function(e){e.length?(this.loadPieClientes=!0,this.getDataProductoCliente(e)):this.pieChartClientes={}},selectTableUsuario:function(e){e.length?(this.loadPieUsuarios=!0,this.getDataClienteVendedor(e)):this.pieChartUsuarios={}},getDataClienteProducto:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={producto:t,ano:this.selectAnos,mes:this.selectMeses},e.next=3,ve(a).then((function(e){s.pieChartProductos=e,s.loadPieProductos=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getDataProductoCliente:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={cliente:t,ano:this.selectAnos,mes:this.selectMeses},e.next=3,we(a).then((function(e){s.pieChartClientes=e,s.loadPieClientes=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getDataClienteVendedor:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){var a,s=this;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={usuario:t,ano:this.selectAnos,mes:this.selectMeses},e.next=3,xe(a).then((function(e){s.pieChartUsuarios=e,s.loadPieUsuarios=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVentas:function(e){if(this.barChartData=e,0!==e)for(var t=0;t<e.data.length;t++)isNaN(e.data[t])?this.ventas=this.ventas+e.data[t].value:this.ventas=this.ventas+e.data[t];else this.ventas=0},selectTreeAno:function(e){this.selectAnos=e},selectTreeMes:function(e){this.selectMeses=e},loadProducto:function(e){this.loadTableProductos=e},selectTreeProducto:function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.pieChartProductos={},this.selectProductos=t,Object.entries(t).length?(this.tableDataProductos=t["children"],this.tableColumnProductos=t["tablecolumns"]):(this.tableDataProductos=[],this.tableColumnProductos=[]);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadCliente:function(e){this.loadTableClientes=e},selectTreeCliente:function(e){this.pieChartClientes={},this.selectClientes=e,Object.entries(e).length?(this.tableDataClientes=e["children"],this.tableColumnClientes=e["tablecolumns"]):(this.tableDataClientes=[],this.tableColumnClientes=[])},loadUsuario:function(e){this.loadTableUsuarios=e},selectTreeUsuario:function(e){this.pieChartUsuarios={},this.selectUsuarios=e,Object.entries(e).length?(this.tableDataUsuarios=e["children"],this.tableColumnUsuarios=e["tablecolumns"]):(this.tableDataUsuarios=[],this.tableColumnUsuarios=[])}}},Ce=ye,_e=(a("9706"),a("f903"),Object(S["a"])(Ce,s,i,!1,null,"a5cdb50c",null));t["default"]=_e.exports}}]);