(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41f9fa3d"],{"274e":function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return i})),r.d(e,"g",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return u}));var o=r("b775");function n(){return Object(o["a"])({url:"/usuarios",method:"get"})}function a(){return Object(o["a"])({url:"/lista_usuarios",method:"get"})}function s(){return Object(o["a"])({url:"/nicknames",method:"get"})}function i(){return Object(o["a"])({url:"/rol",method:"get"})}function c(t){return Object(o["a"])({url:"/usuarios",method:"put",data:t})}function l(t){return Object(o["a"])({url:"/usuarios",method:"delete",params:{idusuario:t}})}function u(t){return Object(o["a"])({url:"/user/create",method:"post",data:t})}},"58f8":function(t,e,r){},7514:function(t,e,r){"use strict";var o=r("5ca1"),n=r("0a49")(5),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),o(o.P+o.F*s,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},"9ed6":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticClass:"cont-body"},[r("el-header",[r("el-row",{attrs:{gutter:10}},[r("el-col",{staticClass:"cont-logo",attrs:{xs:4,md:1}},[r("img",{staticClass:"imgLogPage",attrs:{src:t.logPage,alt:"Page"}})]),t._v(" "),r("el-col",{attrs:{xs:20,md:20}},[r("label",{staticClass:"text-logo",staticStyle:{"padding-left":"1%"}},[t._v("FACTURACIÓN")])])],1)],1),t._v(" "),r("el-main",[r("el-form",{ref:"loginForm",attrs:{"label-position":"top",model:t.loginForm,rules:t.loginRules,autocomplete:"on"}},[r("div",{staticClass:"cont-card"},[r("el-card",{staticClass:"box-card style-card",attrs:{shadow:"hover","body-style":t.cardStyle}},[r("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("label",{staticStyle:{"font-size":"x-large",color:"white"}},[t._v("Iniciar sesión")])]),t._v(" "),r("el-row",{staticStyle:{border:"1px solid #f5f5f5",padding:"3% 6% 6% 6%","border-radius":"5px"}},[r("el-col",{attrs:{xs:24,md:24}},[r("el-form-item",{attrs:{label:"Usuario",prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"Usuario",name:"username",type:"text",tabindex:"1",autocomplete:"on",size:"large"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1)],1),t._v(" "),r("el-col",{attrs:{xs:24,md:24}},[r("el-tooltip",{attrs:{content:"Mayúscula",placement:"right",manual:""},model:{value:t.capsTooltip,callback:function(e){t.capsTooltip=e},expression:"capsTooltip"}},[r("el-form-item",{attrs:{label:"Contraseña",prop:"password"}},[r("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"Contraseña",name:"password",tabindex:"2",autocomplete:"on",size:"large"},on:{blur:function(e){t.capsTooltip=!1}},nativeOn:{keyup:[function(e){return t.checkCapslock(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}]},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1)],1)],1)],1),t._v(" "),r("el-row",{staticStyle:{border:"0px solid",padding:"6% 6% 6% 6%"}},[r("el-col",{staticClass:"div-btn-login",staticStyle:{border:"0px solid"},attrs:{xs:24,md:10}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("Ingresar")])],1),t._v(" "),r("el-col",{staticClass:"link-password",attrs:{xs:24,md:14}},[r("a",{staticStyle:{color:"#409EFF"},attrs:{href:""}},[t._v("Recordar contraseña")])])],1)],1)],1)])],1),t._v(" "),r("div",{staticClass:"footer-login"},[r("span",{staticClass:"textoFooter"},[t._v("\n      UNIGRASAS © 2020\n    ")])])],1)},n=[],a=(r("ac6a"),r("456d"),r("7514"),r("c7eb")),s=(r("96cf"),r("1da1")),i=r("5530"),c=r("61f7"),l=r("59a8"),u=r.n(l),d=r("274e"),p=r("2f62"),f={name:"Login",data:function(){var t=function(t,e,r){var o=e.toLowerCase();Object(c["d"])(o)?r():r(new Error("Por favor ingrese un usuario válido"))},e=function(t,e,r){e.length<6?r(new Error("La contraseña no puede ser menor a seis caracteres")):r()};return{logPage:u.a,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:e}]},passwordType:"password",capsTooltip:!1,loading:!1,redirect:void 0,otherQuery:{},cardStyle:{background:"#e9ecef"},listUsers:[]}},computed:Object(i["a"])({},Object(p["b"])(["name","roles","usuario"])),watch:{$route:{handler:function(t){var e={redirect:"/dashboard"};e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created:function(){this.getNicknames()},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},destroyed:function(){},methods:{getNicknames:function(){var t=Object(s["a"])(Object(a["a"])().mark((function t(){var e=this;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["d"])().then((function(t){e.listUsers=t.users;var r={data:t.nicknames};window.localStorage.setItem("usuarios",JSON.stringify(r))}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),checkCapslock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.shiftKey,r=t.key;r&&1===r.length&&(this.capsTooltip=!!(e&&r>="a"&&r<="z"||!e&&r>="A"&&r<="Z")),"CapsLock"===r&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$store.dispatch("user/login",t.loginForm).then((function(e){var r=t.listUsers.find((function(e){return e.nickname===t.loginForm.username.toLowerCase()})).nombre;t.$notify({title:"Hola ".concat(r),message:"Se ha iniciado tu sesión exitosamente!",position:"bottom-right",type:"success"}),t.$router.push({path:t.redirect||"/"}),t.loading=!1,t.loginForm.password=""})).catch((function(e){console.log("error login -> ",e),t.$notify.error({title:"Error",message:"Contraseña incorrecta"}),t.loading=!1,t.loginForm.password=""}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,r){return"redirect"!==r&&(e[r]=t[r]),e}),{})}}},m=f,g=(r("ee80"),r("2877")),h=Object(g["a"])(m,o,n,!1,null,null,null);e["default"]=h.exports},ee80:function(t,e,r){"use strict";r("58f8")}}]);