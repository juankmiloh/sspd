(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c859de2"],{"0187":function(e,t,r){},"274e":function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u}));var a=r("b775");function o(){return Object(a["a"])({url:"/usuarios",method:"get"})}function n(){return Object(a["a"])({url:"/lista_usuarios",method:"get"})}function i(){return Object(a["a"])({url:"/nicknames",method:"get"})}function s(){return Object(a["a"])({url:"/rol",method:"get"})}function c(e){return Object(a["a"])({url:"/usuarios",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/usuarios",method:"delete",params:{idusuario:e}})}function u(e){return Object(a["a"])({url:"/user/create",method:"post",data:e})}},"2d1a":function(e,t,r){"use strict";r("c3e9")},"2e29":function(e,t,r){"use strict";r("0187")},4395:function(e,t,r){"use strict";r("7da7")},"6acd":function(e,t,r){"use strict";r("d9cb")},"6f65":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(){function e(e){switch(e){case 1:return"UN";case 2:return"DOS";case 3:return"TRES";case 4:return"CUATRO";case 5:return"CINCO";case 6:return"SEIS";case 7:return"SIETE";case 8:return"OCHO";case 9:return"NUEVE"}return""}function t(t){var a=Math.floor(t/10),o=t-10*a;switch(a){case 1:switch(o){case 0:return"DIEZ";case 1:return"ONCE";case 2:return"DOCE";case 3:return"TRECE";case 4:return"CATORCE";case 5:return"QUINCE";default:return"DIECI"+e(o)}case 2:switch(o){case 0:return"VEINTE";default:return"VEINTI"+e(o)}case 3:return r("TREINTA",o);case 4:return r("CUARENTA",o);case 5:return r("CINCUENTA",o);case 6:return r("SESENTA",o);case 7:return r("SETENTA",o);case 8:return r("OCHENTA",o);case 9:return r("NOVENTA",o);case 0:return e(o)}}function r(t,r){return r>0?t+" Y "+e(r):t}function a(e){var r=Math.floor(e/100),a=e-100*r;switch(r){case 1:return a>0?"CIENTO "+t(a):"CIEN";case 2:return"DOSCIENTOS "+t(a);case 3:return"TRESCIENTOS "+t(a);case 4:return"CUATROCIENTOS "+t(a);case 5:return"QUINIENTOS "+t(a);case 6:return"SEISCIENTOS "+t(a);case 7:return"SETECIENTOS "+t(a);case 8:return"OCHOCIENTOS "+t(a);case 9:return"NOVECIENTOS "+t(a)}return t(a)}function o(e,t,r,o){var n=Math.floor(e/t),i=e-n*t,s="";return n>0&&(s=n>1?a(n)+" "+o:r),i>0&&(s+=""),s}function n(e){var t=1e3,r=Math.floor(e/t),n=e-r*t,i=o(e,t,"MIL","MIL"),s=a(n);return""==i?s:i+" "+s}function i(e){var t=1e6,r=Math.floor(e/t),a=e-r*t,i=n(a),s="";return s=o(e,t,"UN MILLON",i?"MILLONES":"MILLONES DE"),""==s?i:s+" "+i}return function(e,t){t=t||{};var r={numero:e,enteros:Math.floor(e),centavos:Math.round(100*e)-100*Math.floor(e),letrasCentavos:"",letrasMonedaPlural:t.plural||"PESOS",letrasMonedaSingular:t.singular||"PESO",letrasMonedaCentavoPlural:t.centPlural||"CENTAVOS",letrasMonedaCentavoSingular:t.centSingular||"CENTAVO"};return r.centavos>0&&(r.letrasCentavos="CON "+function(){return 1==r.centavos?i(r.centavos)+" "+r.letrasMonedaCentavoSingular:i(r.centavos)+" "+r.letrasMonedaCentavoPlural}()),0==r.enteros?"CERO "+r.letrasMonedaPlural+" "+r.letrasCentavos:1==r.enteros?i(r.enteros)+" "+r.letrasMonedaSingular+" "+r.letrasCentavos:i(r.enteros)+" "+r.letrasMonedaPlural+" "+r.letrasCentavos}}()},7818:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s}));var a=r("b775");function o(){return Object(a["a"])({url:"/items",method:"get"})}function n(e){return Object(a["a"])({url:"/items",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/items",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/items",method:"delete",data:e})}},"7da7":function(e,t,r){},a888:function(e,t,r){"use strict";r("a481"),r("6762"),r("2fdb");var a={bind:function(e,t,r){var a=e.querySelector(".el-dialog__header"),o=e.querySelector(".el-dialog");a.style.cssText+=";cursor:move;",o.style.cssText+=";top:0px;";var n=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();a.onmousedown=function(e){var t=e.clientX-a.offsetLeft,i=e.clientY-a.offsetTop,s=o.offsetWidth,c=o.offsetHeight,l=document.body.clientWidth,u=document.body.clientHeight,d=o.offsetLeft,m=l-o.offsetLeft-s,f=o.offsetTop,p=u-o.offsetTop-c,h=n(o,"left"),b=n(o,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),b=+document.body.clientHeight*(+b.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),b=+b.replace(/\px/g,"")),document.onmousemove=function(e){var a=e.clientX-t,n=e.clientY-i;-a>d?a=-d:a>m&&(a=m),-n>f?n=-f:n>p&&(n=p),o.style.cssText+=";left:".concat(a+h,"px;top:").concat(n+b,"px;"),r.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},o=function(e){e.directive("el-drag-dialog",a)};window.Vue&&(window["el-drag-dialog"]=a,Vue.use(o)),a.install=o;t["a"]=a},c3e9:function(e,t,r){},d8c7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("proceso-detalle",{attrs:{"is-detail":!0}})},o=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"createPost-container",staticStyle:{background:"white",height:"89vh"}},[r("sticky",{attrs:{"class-name":"sub-navbar"}},[r("div",{staticStyle:{border:"0px solid red"}},[r("transition",{attrs:{name:"el-zoom-in-center"}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtons,expression:"showButtons"}],staticStyle:{border:"2px solid #67c23a"},attrs:{disabled:!e.generarFactura||0===e.total,size:"medium",icon:"el-icon-top-right",round:""},on:{click:function(t){return e.handlePDF()}}},[e._v("Ver factura")])],1)],1)]),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[r("el-row",{attrs:{gutter:10}},[r("el-form",{ref:"formProceso",staticClass:"demo-ruleForm",attrs:{rules:e.rulesFormProceso,model:e.formProceso,"label-width":"120px","label-position":e.x.matches?"top":""}},[r("el-col",{staticStyle:{border:"0px solid blue"},attrs:{md:8}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Datos generales")])]),e._v(" "),r("el-form-item",{attrs:{label:"Numeración",prop:"idfactura"}},[r("el-input",{staticClass:"control-modal",attrs:{autocomplete:"off",placeholder:"No. factura",readonly:""},model:{value:e.formProceso.idfactura,callback:function(t){e.$set(e.formProceso,"idfactura",t)},expression:"formProceso.idfactura"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Cliente",prop:"cliente"}},[r("el-select",{staticClass:"control-modal",attrs:{filterable:"",placeholder:"Seleccione un cliente",disabled:!e.editarProceso},model:{value:e.formProceso.cliente,callback:function(t){e.$set(e.formProceso,"cliente",t)},expression:"formProceso.cliente"}},e._l(e.datosClientes,(function(e){return r("el-option",{key:e.idcliente,attrs:{label:e.nombre,value:e.idcliente}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Divisa",prop:"divisa"}},[r("el-select",{staticClass:"control-modal",attrs:{filterable:"",placeholder:"Seleccione divisa",disabled:!e.editarProceso},model:{value:e.formProceso.divisa,callback:function(t){e.$set(e.formProceso,"divisa",t)},expression:"formProceso.divisa"}},[r("el-option",{attrs:{label:"COP - Colombia, Pesos",value:"COP - Colombia, Pesos"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Vendedor",prop:"idusuario"}},[r("el-select",{staticClass:"control-modal",attrs:{filterable:"",placeholder:"Seleccione un usuario",disabled:!e.editarProceso},model:{value:e.formProceso.idusuario,callback:function(t){e.$set(e.formProceso,"idusuario",t)},expression:"formProceso.idusuario"}},e._l(e.datosUsuarios,(function(e){return r("el-option",{key:e.idusuario,attrs:{label:e.nombre+" "+e.apellido,value:e.idusuario}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Emisión",prop:"f_emision"}},[r("el-date-picker",{staticClass:"control-modal",attrs:{type:"datetime",placeholder:"Seleccione una fecha",disabled:!e.editarProceso},model:{value:e.formProceso.f_emision,callback:function(t){e.$set(e.formProceso,"f_emision",t)},expression:"formProceso.f_emision"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Vencimiento",prop:"f_vencimiento"}},[r("el-date-picker",{staticClass:"control-modal",attrs:{disabled:!e.abogadoEditar,type:"date",placeholder:"Seleccione una fecha"},on:{input:function(t){return e.changeDatePago()}},model:{value:e.formProceso.f_vencimiento,callback:function(t){e.$set(e.formProceso,"f_vencimiento",t)},expression:"formProceso.f_vencimiento"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Descripción",prop:"descripcion"}},[r("el-input",{staticClass:"control-modal",attrs:{disabled:!e.abogadoEditar,type:"textarea",rows:"5",maxlength:"140","show-word-limit":"",placeholder:"Ingrese una nota"},model:{value:e.formProceso.descripcion,callback:function(t){e.$set(e.formProceso,"descripcion",t)},expression:"formProceso.descripcion"}})],1)],1)],1),e._v(" "),r("el-col",{staticClass:"espacio-top-pago",attrs:{md:16}},[r("el-row",[r("el-col",{staticClass:"input-etapas div-card",staticStyle:{border:"0px solid blue"},attrs:{md:24}},[r("el-card",{staticClass:"box-card div-card-header",staticStyle:{padding:"0",margin:"0"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{staticStyle:{border:"0px solid red"},attrs:{span:8,xs:24}},[r("el-form-item",{attrs:{label:"",prop:"metodopago"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("label",{staticStyle:{color:"#606266"}},[r("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("Método de pago")])]),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-select",{staticClass:"control-modal",attrs:{disabled:!e.abogadoEditar,filterable:"",placeholder:"Seleccione método de pago",clearable:""},model:{value:e.formProceso.metodopago,callback:function(t){e.$set(e.formProceso,"metodopago",t)},expression:"formProceso.metodopago"}},e._l(e.datosMetodopago,(function(e){return r("el-option",{key:e.idmetodopago,attrs:{label:e.nombre,value:e.idmetodopago}})})),1)],1)],1)],1)],1),e._v(" "),r("el-col",{staticStyle:{border:"0px solid"},attrs:{span:8,xs:24}},[r("el-form-item",{attrs:{label:"",prop:"mediopago"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("label",{staticStyle:{color:"#606266"}},[r("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("Medio de pago")])]),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-select",{staticClass:"control-modal",attrs:{disabled:!e.abogadoEditar,filterable:"",placeholder:"Seleccione medio de pago",clearable:""},model:{value:e.formProceso.mediopago,callback:function(t){e.$set(e.formProceso,"mediopago",t)},expression:"formProceso.mediopago"}},e._l(e.datosMediopago,(function(e){return r("el-option",{key:e.idmediopago,attrs:{label:e.nombre,value:e.idmediopago}})})),1)],1)],1)],1)],1),e._v(" "),r("el-col",{staticStyle:{border:"0px solid"},attrs:{span:8,xs:24}},[r("el-form-item",{attrs:{label:"",prop:"f_pago"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("label",{staticStyle:{color:"#606266"}},[r("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("Fecha de pago")])]),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-date-picker",{staticClass:"control-modal",attrs:{disabled:!e.abogadoEditar,type:"date",placeholder:"Seleccione una fecha"},model:{value:e.formProceso.f_pago,callback:function(t){e.$set(e.formProceso,"f_pago",t)},expression:"formProceso.f_pago"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),r("el-col",{staticClass:"espacio-top-items",attrs:{md:24}},[e.id?r("tabla-items",{attrs:{idproceso:e.id,editar:e.abogadoEditar},on:{total:e.submitTotal}}):e._e()],1),e._v(" "),r("el-col",{staticClass:"div-card espacio-top-items",attrs:{md:24}},[r("el-card",{staticClass:"box-card div-card-header"},[r("el-row",[r("el-col",{staticClass:"input-total",attrs:{md:24,xs:24}},[r("el-form-item",{attrs:{label:"Total factura ($)",prop:"total"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{autocomplete:"off",placeholder:"Total factura",clearable:"",readonly:""},model:{value:e.valueTotal,callback:function(t){e.valueTotal=t},expression:"valueTotal"}})],1),e._v(" "),r("div",{staticStyle:{"text-align":"center","padding-top":"1%","padding-bottom":"1%"}},[r("span",{staticStyle:{color:"#303133","font-size":"13px"}},[e._v("( "+e._s(e._f("uppercaseFirst")(e.convertNumberToLetters(e.formProceso.total)))+" )")])])],1)],1)],1)],1),e._v(" "),r("el-col",{staticStyle:{border:"0px solid blue"},attrs:{md:24}},[r("el-card",{staticClass:"box-card",staticStyle:{background:"none",border:"0","text-align":"center"},attrs:{shadow:"never"}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showOnlyAdmin,expression:"showOnlyAdmin"}],staticStyle:{border:"0px solid #67c23a",width:"9em"},attrs:{type:e.editarProceso?"danger":"primary",icon:e.editarProceso?"el-icon-error":"el-icon-edit"},on:{click:function(t){e.editarProceso=!e.editarProceso,e.editarForm()}}},[e._v(e._s(e.textEditarProceso))]),e._v(" "),r("el-button",{staticStyle:{width:"9em"},attrs:{disabled:!e.abogadoEditar,type:e.editarProceso?"primary":"success",icon:e.editarProceso?"el-icon-circle-check":"el-icon-check"},on:{click:function(t){return e.submitForm("formProceso")}}},[e._v(e._s(e.textActualizar))])],1)],1)],1)],1)],1)],1)],1)],1)},i=[],s=r("c7eb"),c=(r("96cf"),r("1da1")),l=r("5530"),u=r("2f62"),d=r("de7d"),m=r("dec3"),f=r("274e"),p=r("b775");function h(){return Object(p["a"])({url:"/metodopago",method:"get"})}function b(){return Object(p["a"])({url:"/mediopago",method:"get"})}var g=r("b804"),v=r("e6fd"),w=r("a888"),O=r("c1df"),x=r.n(O),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{md:24}},[r("el-card",{staticClass:"box-card div-causas-header"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%",border:"1px solid #d8ebff"},attrs:{data:e.listaItems,height:"35vh",border:"",fit:"","highlight-current-row":""}},[e._l(e.tableColumnsItems,(function(t){return r("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,align:"center",width:e.x.matches?t.width_xs:t.width,sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return["item"===t.prop?r("div",[r("el-tag",{staticStyle:{"font-size":"10px"},attrs:{type:"primary"}},[e._v(e._s(a.row[t.prop]))])],1):"cantidad"===t.prop?r("div",{staticStyle:{"font-size":"13px"}},[e._v(e._s(e._f("formatNumber")(a.row[t.prop])))]):"precio"===t.prop?r("div",{staticStyle:{"font-size":"13px"}},[e._v("$ "+e._s(e._f("formatNumber")(a.row[t.prop])))]):"total"===t.prop?r("div",{staticStyle:{"font-size":"13px"}},[e._v("$ "+e._s(e.getTotal(a.row)))]):r("div",{staticStyle:{"font-size":"13px"}},[e._v(e._s(a.row[t.prop]))])]}}],null,!0)})})),e._v(" "),r("el-table-column",{attrs:{align:"center",width:"125"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-button",{staticStyle:{border:"1px solid #67c23a"},attrs:{disabled:!e.vendedorEditar,size:"mini",icon:"el-icon-circle-plus",round:""},on:{click:function(t){return e.handleAgregar()}}},[e._v("Agregar")])]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.vendedorEditar,size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(r){return e.handleEdit(t.row)}}}),e._v(" "),r("el-button",{attrs:{disabled:!e.vendedorEditar,size:"mini",type:"danger",icon:"el-icon-delete-solid"},on:{click:function(r){return e.handleDelete(t.row)}}})]}}])})],2)],1)],1),e._v(" "),r("modal-agregar",{attrs:{modaltitulo:e.tituloModalItem,modalvisible:e.dialogVisibleItem,modalform:e.formItem,domcomponents:e.domItem,rulesform:e.rulesFormItem,datamodal:e.dataFormItem,action:e.modalAction},on:{confirmar:e.submitAgregar}}),e._v(" "),r("modal-delete",{attrs:{titulo:"Advertencia",mensaje:e.mensajeModalDelete,modalvisible:e.deleteDialogVisible},on:{confirmar:e.submitDelete}})],1)},j=[],I=r("b85c"),y=(r("ac6a"),r("0141")),P=r("d589"),E={tableColumnsItems:[{label:"Código",prop:"coditem",width:94,width_xs:100},{label:"Producto",prop:"item",width:235,width_xs:200},{label:"Cantidad",prop:"cantidad",width_xs:110},{label:"Precio",prop:"precio",width_xs:110},{label:"Valor",prop:"total",width_xs:150}],formItem:{idfactura:"",iditem:"",cantidad:"",precio:""},domItem:[{type:"select",prop:"iditem",label:"Producto",placeholder:"Seleccione un producto"},{type:"number",prop:"cantidad",label:"Cantidad",placeholder:"Ingrese cantidad de producto"},{type:"decimal",prop:"precio",label:"Precio",placeholder:"Ingrese el precio"}],rulesFormItem:{iditem:[{required:!0,message:"Seleccione un producto",trigger:"change"}],cantidad:[{required:!0,message:"Ingrese la cantidad"},{type:"number",message:"Este campo debe ser numérico"}],precio:[{required:!0,message:"Ingrese un precio"},{type:"number",message:"Este campo debe ser numérico"}]},dataFormItem:{iditem:[{id:1,label:"Producto1",value:1},{id:2,label:"Producto2",value:2}]}},S=r("e120"),C=r("7818"),k={directives:{elDragDialog:w["a"]},components:{ModalAgregar:y["a"],ModalDelete:P["a"]},props:{idproceso:{type:String,required:!0},editar:{type:Boolean,required:!0}},data:function(){return{loading:!1,tableColumnsItems:E.tableColumnsItems,listaItems:[],vendedorEditar:this.editar,dialogVisibleItem:!1,deleteDialogVisible:!1,mensajeModalDelete:"",tituloModalItem:"",formItem:E.formItem,domItem:E.domItem,rulesFormItem:E.rulesFormItem,dataFormItem:{},modalAction:"",listaProductos:[],delItem:{},x:""}},watch:{editar:{deep:!0,handler:function(e){console.log('antes !abogadoEditar" -> ',this.editar),this.abogadoEditar=e,console.log('despues !abogadoEditar" -> ',this.editar)}}},created:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFacturaItems();case 2:this.getItems(),this.x=window.matchMedia("(max-width: 800px)");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.formItem={};case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleAgregar:function(){this.formItem.idfactura=this.idproceso,this.tituloModalItem="Agregar item",this.modalAction="Agregar",this.dialogVisibleItem=!0},handleEdit:function(e){this.formItem=e,this.tituloModalItem="Editar item",this.modalAction="Editar",this.dialogVisibleItem=!0},handleDelete:function(e){this.delItem=e,this.mensajeModalDelete="¿Realmente desea quitar <b>".concat(e.item,"</b>?"),this.deleteDialogVisible=!0},submitAgregar:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var r=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.response){e.next=17;break}if(this.loading=!0,"Agregar"!==t.action){e.next=7;break}return e.next=5,Object(S["a"])(t.data).then(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.$notify({title:"Bien hecho!",message:"Item agregado con éxito",position:"bottom-right",type:"success",duration:2e3});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=9;break;case 7:return e.next=9,Object(S["d"])(t.data).then(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.$notify({title:"Bien hecho!",message:"Item modificado con éxito",position:"bottom-right",type:"success",duration:2e3});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:return this.formItem={},this.dialogVisibleItem=!1,e.next=13,this.getFacturaItems();case 13:this.getItems(),this.loading=!1,e.next=22;break;case 17:return this.formItem={},this.dialogVisibleItem=!1,e.next=21,this.getFacturaItems();case 21:this.getItems();case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitDelete:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var r=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return this.loading=!0,e.next=4,Object(S["b"])(this.delItem).then(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.$notify({title:"Información",message:"Se ha eliminado el item!",position:"bottom-right",type:"success",duration:2e3}),r.deleteDialogVisible=!1,e.next=4,r.getFacturaItems();case 4:r.getItems(),r.loading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=7;break;case 6:this.deleteDialogVisible=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getFacturaItems:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["c"])(this.idproceso).then((function(e){t.listaItems=e;var r=0;t.listaItems.forEach((function(e){r+=e.cantidad*e.precio})),t.$emit("total",r)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getItems:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(C["c"])().then((function(e){t.dataFormItem.iditem=e;var r,a=Object(I["a"])(t.listaItems);try{var o=function(){var e=r.value;t.dataFormItem.iditem.filter((function(r){if(r.value===e.iditem){var a=t.dataFormItem.iditem.indexOf(r);t.dataFormItem.iditem.splice(a,1)}}))};for(a.s();!(r=a.n()).done;)o()}catch(n){a.e(n)}finally{a.f()}}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getTotal:function(e){var t=e.cantidad*e.precio;return new Intl.NumberFormat("de-DE").format(t)}}},T=k,M=(r("2e29"),r("2877")),N=Object(M["a"])(T,_,j,!1,null,"09b0b8dd",null),F=N.exports,D=r("6f65"),A={name:"ProcesoDetalle",directives:{elDragDialog:w["a"]},components:{Sticky:g["a"],TablaItems:F},props:{isDetail:{type:Boolean,default:!1}},data:function(){return{id:"",datosUsuarios:[],datosClientes:[],datosMetodopago:[],datosMediopago:[],formProceso:v["a"].formDetalleProceso,rulesFormProceso:v["a"].rulesDetalleProceso,editarProceso:!1,textEditarProceso:"Editar",textActualizar:"Actualizar",loading:!1,tempRoute:{},showButtons:!1,showButtonsModal:!1,showOnlyAdmin:!1,abogadoEditar:!1,total:0,valueTotal:0,generarFactura:!1,x:""}},computed:Object(l["a"])({},Object(u["b"])(["name","roles","idusuario"])),watch:{total:{deep:!0,handler:function(e){this.formProceso.total=e,this.valueTotal=new Intl.NumberFormat("de-DE").format(e)}}},created:function(){this.isDetail&&(this.loading=!0,this.id=this.$route.params.id,this.initView(),this.x=window.matchMedia("(max-width: 800px)")),this.tempRoute=Object.assign({},this.$route)},methods:{changeDatePago:function(){console.log(this.formProceso.f_vencimiento),this.formProceso.f_pago=this.formProceso.f_vencimiento},convertNumberToLetters:function(e){var t=Object(D["a"])(e,{plural:"PESOS",singular:"PESO",centPlural:"CENTAVOS",centSingular:"CENTAVO"});return t},handlePDF:function(){var e=this.$router.resolve({path:"/pdf/factura/".concat(this.id)});window.open(e.href,"_self")},submitTotal:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.total=t,e.next=3,Object(d["g"])({idfactura:this.id,total:this.total});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),initView:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"administrador"===this.roles[0]&&(this.showOnlyAdmin=!0,this.abogadoEditar=!0),this.getUsuarios(),this.getClientes(),this.getMetodopago(),this.getMediopago(),e.next=7,this.fetchData(this.id);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUsuarios:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["f"])().then((function(e){t.datosUsuarios=e}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getClientes:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])().then((function(e){t.datosClientes=e}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getMetodopago:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h().then((function(e){t.datosMetodopago=e}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getMediopago:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(){var t=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b().then((function(e){t.datosMediopago=e}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var r,a=this;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},e.next=3,Object(d["c"])(t).then(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(o){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(o.length>0)){e.next=5;break}r=o[0],a.generarFactura=!0,e.next=7;break;case 5:return e.next=7,Object(d["d"])(t).then(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t[0],r.descripcion="",a.generarFactura=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:a.loading=!1,a.showButtons=!0,a.formProceso=r,a.setTagsViewTitle(),a.setPageTitle(),a.$refs["formProceso"]&&a.$refs["formProceso"].resetFields();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return e}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setTagsViewTitle:function(){var e="Factura",t=Object.assign({},this.tempRoute,{title:"".concat(e," ").concat(this.formProceso.idfactura)});this.$store.dispatch("tagsView/updateVisitedView",t)},setPageTitle:function(){var e="Factura";document.title="".concat(e," - ").concat(this.formProceso.idfactura)},editarForm:function(){this.editarProceso?(this.$notify({title:"Advertencia",message:"Has activado el modo edición!",type:"warning",duration:2e3}),this.textEditarProceso="Cancelar",this.textActualizar="Guardar",window.localStorage.setItem("form_save",JSON.stringify(this.formProceso))):(this.$notify({title:"info",message:"Has desactivado el modo edición!",type:"info",duration:2e3}),this.textEditarProceso="Editar",this.textActualizar="Actualizar",this.formProceso=JSON.parse(window.localStorage.getItem("form_save")),window.localStorage.removeItem("form_save"))},submitForm:function(){var e=this,t=this.formProceso;this.$refs.formProceso.validate(function(){var r=Object(c["a"])(Object(s["a"])().mark((function r(a){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=11;break}return e.loading=!0,e.showButtons=!1,t.f_emision=x()(t.f_emision).format("YYYY/MM/DD HH:mm:ss"),t.f_vencimiento=x()(t.f_vencimiento).format("YYYY/MM/DD HH:mm:ss"),t.f_pago=x()(t.f_pago).format("YYYY/MM/DD HH:mm:ss"),t.total=parseInt(t.total),r.next=9,Object(d["f"])(t).then(function(){var r=Object(c["a"])(Object(s["a"])().mark((function r(a){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.editarProceso&&e.$notify({title:"info",message:"Se ha desactivado el modo edición!",type:"info",duration:2e3}),r.next=3,Object(d["c"])(e.id).then(function(){var r=Object(c["a"])(Object(s["a"])().mark((function r(a){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t=a[0],e.textEditarProceso="Editar",e.textActualizar="Actualizar",e.$notify({title:"Bien hecho!",message:"Factura actualizada con éxito",position:e.editarProceso?"top-right":"bottom-right",type:"success",duration:2e3}),e.editarProceso=!1,e.loading=!1,e.showButtons=!0,e.generarFactura=!0;case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 9:r.next=12;break;case 11:return r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},V=A,$=(r("6acd"),r("2d1a"),r("4395"),Object(M["a"])(V,n,i,!1,null,"16124862",null)),q=$.exports,z={name:"DetalleForm",components:{ProcesoDetalle:q}},H=z,U=Object(M["a"])(H,a,o,!1,null,null,null);t["default"]=U.exports},d9cb:function(e,t,r){},de7d:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"g",(function(){return d}));var a=r("b775");function o(){return Object(a["a"])({url:"/procesos",method:"get"})}function n(e){return Object(a["a"])({url:"/proceso/detalle",method:"get",params:{idProceso:e}})}function i(e){return Object(a["a"])({url:"/proceso/detalle/inicial",method:"get",params:{idProceso:e}})}function s(e){return Object(a["a"])({url:"/procesos",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/procesos/update",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/procesos",method:"put",params:{idProceso:e}})}function u(e){return Object(a["a"])({url:"/procesos/usuarioupdate",method:"put",data:e})}function d(e){return Object(a["a"])({url:"/procesos/totalupdate",method:"put",data:e})}},dec3:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s}));var a=r("b775");function o(){return Object(a["a"])({url:"/clientes",method:"get"})}function n(e){return Object(a["a"])({url:"/clientes",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/clientes",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/clientes",method:"delete",data:e})}},e120:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s}));var a=r("b775");function o(e){return Object(a["a"])({url:"/facturaHasItems/detalle",method:"get",params:{idproceso:e}})}function n(e){return Object(a["a"])({url:"/facturaHasItems",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/facturaHasItems/update",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/facturaHasItems",method:"delete",data:e})}},e6fd:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={tableColumnsAdmin:[{label:"Factura",prop:"idfactura",width:"",filter:"filterFactura",width_xs:110},{label:"Cliente",prop:"cliente",width:300,filter:"filterCliente",width_xs:200},{label:"Emisión",prop:"f_emision",width:"",filter:"filterFcreacion",width_xs:150},{label:"Total",prop:"total",width:"",filter:"filterTotal",width_xs:110},{label:"Vendedor",prop:"usuario",width:"",filter:"filterVendedor",width_xs:200}],tableColumnsAbogado:[{label:"Numeración",prop:"idfactura",width:"",filter:"filterFactura",width_xs:150},{label:"Cliente",prop:"cliente",width:350,filter:"filterCliente",width_xs:250},{label:"Creacion",prop:"f_emision",width:"",filter:"filterFcreacion",width_xs:150},{label:"Total",prop:"total",width:"",filter:"filterTotal",width_xs:150},{label:"Vendedor",prop:"usuario",width:"",filter:"filterVendedor",width_xs:200}],tableColumnsEtapas:[{label:"#",prop:"idetapa",width:70},{label:"Radicado",prop:"radicadoEtapa"},{label:"Etapa",prop:"nombreEtapa",width:300},{label:"Fecha de inicio",prop:"fechaInicioEtapa"},{label:"Fecha fin",prop:"fechaFinEtapa"},{label:"Observación",prop:"observacionEtapa",width:300}],filter:[{text:"Energía",value:"Energía"},{text:"Gas",value:"Gas"},{text:"GLP",value:"GLP"}],rulesFormProceso:{cliente:[{required:!0,message:"Seleccione un cliente",trigger:"change"}],divisa:[{required:!0,message:"Seleccione una divisa",trigger:"change"}],f_emision:[{required:!0,message:"Ingrese una fecha válida",trigger:"change"}],usuario:[{required:!0,message:"Seleccione un usuario",trigger:"change"}]},formAgregar:{cliente:"",divisa:"",f_emision:"",usuario:""},formUsuario:{usuario:"",idfactura:""},formDetalleProceso:{idfactura:"",cliente:"",divisa:"",f_emision:"",f_vencimiento:"",idusuario:"",descripcion:"",metodopago:"",mediopago:"",f_pago:""},rulesDetalleProceso:{cliente:[{required:!1,message:"Seleccione un cliente",trigger:"change"}],divisa:[{required:!1,message:"Seleccione una divisa",trigger:"change"}],f_emision:[{required:!0,message:"Ingrese una fecha válida",trigger:"change"}],f_vencimiento:[{required:!0,message:"Ingrese una fecha válida",trigger:"change"}],usuario:[{required:!1,message:"Seleccione un usuario",trigger:"change"}],metodopago:[{required:!0,message:"Seleccione un método de pago",trigger:"change"}],mediopago:[{required:!0,message:"Seleccione un medio de pago",trigger:"change"}],f_pago:[{required:!0,message:"Ingrese una fecha válida",trigger:"change"}],descripcion:[{required:!1,message:"Ingrese una nota",trigger:"change"},{min:10,max:140,message:"La longitud de la nota debe ser mínimo de 10 caracteres",trigger:"blur"}]},formAgregarEtapa:{etapa:"",fechaInicioEtapa:null,fechaFinEtapa:null,observacionEtapa:""},rulesFormEtapa:{etapa:[{required:!0,message:"Seleccione una etapa",trigger:"change"}],fechaInicioEtapa:[{required:!0,message:"Ingrese una fecha válida",trigger:"change"}],observacionEtapa:[{required:!1,message:"Ingrese una observación",trigger:"blur"}]},formUser:{nombre:"",apellido:"",genero:"",nickname:"",contrasena:"",rol:"",descripcion:"",avatar:"",token:""},rulesFormUser:{nombre:[{required:!0,message:"Ingrese nombre",trigger:"blur"}],apellido:[{required:!0,message:"Ingrese apellido",trigger:"blur"}],genero:[{required:!0,message:"Seleccione un género",trigger:"change"}],rol:[{required:!0,message:"Seleccione un rol",trigger:"change"}],descripcion:[{required:!0,message:"Ingrese una descripción del usuario",trigger:"change"}]},dataGenero:[{idgenero:1,nombre:"Hombre"},{idgenero:2,nombre:"Mujer"}]}}}]);